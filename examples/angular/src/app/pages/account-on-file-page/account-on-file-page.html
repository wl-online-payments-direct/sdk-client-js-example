<div class="flex column center m-0">
  <wl-logo></wl-logo>
  <h1 class="m-0">Pay with a credit card</h1>
  <p class="self-start m-0"><strong>
    Total amount: {{ getFormattedAmount() }}
    {{ getCurrency() }}
  </strong></p>
  <p class="self-start m-0">Selected card type: {{ paymentProduct?.json?.displayHints?.label }}</p>
  <a routerLink="/payment" class="button link self-start">‚Üê Back to payment method selection</a>
  <form [formGroup]="form" class="form" (ngSubmit)="handleProcessPayment()" #accountOnFileFormRef>
    <wl-input formControlName="cardNumber" [defaultValue]="getCardNumber()" classes="field" id="card-number"
              label="Card number"
              required
    >
    </wl-input>
    <div class="flex row">
      <wl-input label="Expiry date" id="expiry-date" formControlName="expiryDate"
                required
                [defaultValue]="getExpiryDate()"
                [disabled]="true"
      >
      </wl-input>
      @if (hasField('cvv')) {
        <wl-input formControlName="cvv" label="Security code"
                  id="cvv" type="number"
                  required
                  [classes]="((form.get('cvv')?.touched && form.get('cvv')?.invalid && form.get('cvv')?.dirty) ? 'error ' : '')"
                  [maskProduct]="paymentProduct"
                  maskField="cvv">
          >
        </wl-input>
      }
    </div>
    <wl-input label="Cardholder Name" classes="field"
              formControlName="cardholderName"
              id="cardholderName"
              required
              [defaultValue]="getCardholderName()"
              [disabled]="true"
    >
    </wl-input>
    <button class="button primary" type="submit">Pay now</button>
  </form>
</div>
